<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo</title>

    <style>
      .tool-bar {
        display: fixed;
        right: 20px;
        bottom: 20px;

        width: 56px;
        height: 165px;
        background-color: gray;
      }
    </style>
  </head>
  <body>
    <div class="tool-bar">
      <div class="item">
        <i class="icon icon01"></i>
        <div class="name">购物车</div>
      </div>
      <div class="item">
        <i class="icon icon02"></i>
        <div class="name">收藏</div>
      </div>
      <div class="item">
        <i class="icon icon03"></i>
        <div class="name">限时活动</div>
      </div>
      <div class="item">
        <i class="icon icon04"></i>
        <div class="name">大礼包</div>
      </div>
    </div>

    <script>
      // 1.动态给 icon 设置 backgroundPosition，设值精灵图的位置。
      var iconEls = document.querySelectorAll('.icon')
      for (var i = 0; i < iconEls.length; i++) {
        iconEls[i].style.backgroundPosition = `-48px -${50 * i}px`
      }
      // 2.实现鼠标进入动画
      // 方案一: mouseenter(不能使用事件委托)，需要在堆内存中创建很多函数。
      var itemEls = document.querySelectorAll('.item')
      for (var itemEl of itemEls) {
        itemEl.onmouseenter = function () {
          this.children[1].style.width = '62px'
        }
        itemEl.onmouseleave = function () {
          this.children[1].style.width = '0'
        }
      }
      // 方案二: mouseover(使用事件委托)
      var toolbarEl = document.querySelector('.tool-bar')
      toolbarEl.onmouseover = function (event) {
        handleMouseEvent(event, 62)
      }
      toolbarEl.onmouseout = function (event) {
        handleMouseEvent(event, 0)
      }
      function handleMouseEvent(event, width) {
        if (event.target === toolbarEl) return
        // 1.获取唯一的 item
        var itemEl = event.target.classList.contains('item')
          ? event.target
          : event.target.parentElement
        // 2.根据 item 获取 nameElement，并设置宽度
        var nameEl = (itemEl.children[1].style.width = `${width}px`)
      }
    </script>
  </body>
</html>
